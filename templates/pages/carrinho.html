<!-- templates/pages/carrinho.html -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrinho | MAGDA</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    {% include 'layouts/navbar.html' %}
    
    <div class="container" style="margin-top: 140px; padding: 40px 20px;">
        <h1>Meu Carrinho</h1>
        
        {% if itens %}
            <div class="carrinho-container">
                {% for item in itens %}
                <div class="carrinho-item" style="display: flex; gap: 20px; padding: 20px; border-bottom: 1px solid #eee;">
                    <img src="{{ url_for('static', filename='uploads/' + item.imagem) if item.imagem else url_for('static', filename='images/default.png') }}" 
                         alt="{{ item.nome }}" style="width: 120px; height: 120px; object-fit: cover;">
                    <div style="flex: 1;">
                        <h3>{{ item.nome }}</h3>
                        {% if item.tamanho_nome or item.cor_nome %}
                        <p>
                            {% if item.tamanho_nome %}Tamanho: {{ item.tamanho_nome }}{% endif %}
                            {% if item.cor_nome %} | Cor: {{ item.cor_nome }}{% endif %}
                        </p>
                        {% endif %}
                        <p>Quantidade: {{ item.quantidade }}</p>
                        <p>Preço: R$ {{ "%.2f"|format(item.preco|float) }}</p>
                        <p>Subtotal: R$ {{ "%.2f"|format(item.subtotal|float) }}</p>
                    </div>
                </div>
                {% endfor %}
                
                <div class="carrinho-totais" style="margin-top: 30px; padding: 20px; background: #f8f9fa;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>Subtotal:</span>
                        <span>R$ {{ "%.2f"|format(subtotal) }}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>Frete estimado:</span>
                        <span>R$ 15,90</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2em;">
                        <span>Total:</span>
                        <span>R$ {{ "%.2f"|format(subtotal + 15.90) }}</span>
                    </div>
                    
                    <a href="/checkout_dados" class="btn-iniciar-compra" style="display: block; margin-top: 20px; text-align: center;">
                        FINALIZAR COMPRA
                    </a>
                </div>
            </div>
        {% else %}
            <div style="text-align: center; padding: 60px 20px;">
                <h3>Seu carrinho está vazio</h3>
                <p>Adicione produtos para continuar</p>
                <a href="/produtos" style="display: inline-block; margin-top: 20px; padding: 12px 24px; background: #000; color: white; text-decoration: none;">
                    VER PRODUTOS
                </a>
            </div>
        {% endif %}
    </div>
    
    {% include 'layouts/footer.html' %}
</body>
</html>